#      BOOTSTRAP CONFIG FILE
#
# format:
# =<Category>
# <tag>, [name], [command-name], [description]
#
# - tag:
#       - P: package (pacman)
#       - A: AUR package (yay)
#       - C: custom command (combined with "=CMD" entry)
# - name: package name
# - command-name (optional): name of "=CMD" entry
# - description (optional): description of item
#
#               OR
#
# =CMD name: <<system command to run>
# =CMD
# <system commands to run>
# <...>
#
# Please note: =CMD sections must be added at the end, after categories

=System
P,reflector,mirrorlist,mirror-list optimizer
P,base-devel cmake binutils boost pacman-contrib,,build tools
P,intel-ucode
P,openssh,enable-sshd
P,net-tools dnsutils inetutils iproute2 macchanger speedtest-cli nmap,,network tools
P,zsh,zsh
A,virtualbox virtualbox-ext-oracle virtualbox-host-modules-arch,,virtualbox host utils
P,virtualbox-guest-utils xf86-video-vmware,enable-virtualbox,virtualbox guest utils
A,nordvpn-bin
P,python-pip
P,jre-openjdk
A,bluez bluez-utils rofi-bluetooth-git,enable-bluetooth,bluetooth tools
P,alsa-utils pulseaudio-alsa pulseaudio-bluetooth pavucontrol,,audio tools
P,strace,,debugging tools
P,tlp,enable-tlp
A,timeshift
P,brightnessctl
P,ntfs-3g,,NTFS support

=Xorg
P,xorg-server xorg-apps xorg-xinit,,xorg display server
P,picom
P,arandr
P,xterm
P,numlockx
P,xbindkeys
P,xclip
P,xdo
P,xlsw-git
P,wmctrl
A,wmutils-git
A,xlsw-git
A,xtitle
P,redshift

=Sound utilities
P,alsa-utils 
P,pulseaudio-alsa

=Desktop Environment
P,lightdm lightdm-gtk-greeter,enable-lightdm
P,bspwm sxhkd,,bspwm window manager
P,dunst libnotify notification-daemon,,notification manager
P,termite
P,alacritty
A,polybar playerctl zscroll-git,,polybar
P,nitrogen
P,rxvt-unicode
P,tmux
P,xdo
A,dmenu2
P,rofi
P,xclip
A,networkmanager-dmenu
A,betterlockscreen
P,thunar

=Utilities
P,zip unzip unrar p7zip gzip bzip2,,archiving/compression tools
P,vim,vim
P,wget
P,man-db
P,ranger atool elinks ffmpegthumbnailer highlight mediainfo odt2txt perl-image-exiftool ueberzug,,ranger
P,vifm
P,source-highlight
P,fzf
P,fd
P,pkgfile
P,xdg-utils
P,ripgrep
P,tree
P,bat
P,ncdu
P,htop
P,btop
P,feh
P,scrot
P,flameshot
P,neofetch
P,pfetch
P,zathura zathura-pdf-mupdf,,zathura
P,mlocate
P,exa
P,kdeconnect

=GUI Apps
P,firefox
P,chromium
A,brave-bin
A,spotify spotifywm-git,,spotify
P,vlc
P,galculator
P,notepadqq
P,cherrytree
P,cheese
A,popcorntime-bin
P,qbittorrent
P,bleachbit

=Fonts
P,gucharmap
A,font-manager
A,nerd-fonts-fira-code

=Custom
P,stow,dotfiles,dotfiles
P,nodejs npm,lifx,lifx controller
A,i8kutils dell-bios-fan-control-git tcl acpi,fan-control,i8k fan control

=Configuration
C,,load-env,load dotfiles
C,,load-fonts,load fonts
C,,enable-macspoof,spoof MAC address
C,,enable-bluetooth_poweron,auto-power bluetooth
C,,mount-data,mount data
C,,lockscreen,configure lockscreen
C,,kbd-backlight,keyboard backlight timeout

=CMD mirrorlist: country=$(curl -Ss ipinfo.io | awk -F'[:,"]' '/country/ { print $5 }') ; sudo reflector -c ${country:-AU} --sort rate --latest 5 --save /etc/pacman.d/mirrorlist
=CMD enable-sshd: sudo systemctl enable --now sshd
=CMD enable-lightdm: sudo systemctl enable --now lightdm
=CMD enable-virtualbox: sudo systemctl enable --now vboxservice
=CMD enable-bluetooth: sudo systemctl enable --now bluetooth
=CMD enable-bluetooth-poweron: sudo systemctl enable --now bluetooth-poweron
=CMD enable-tlp: sudo systemctl enable --now tlp
=CMD dotfiles: git clone git@github.com:Subbeh/dotfiles.git ~/.dotfiles
=CMD zsh: chsh -s $(which zsh)
=CMD vim: mkdir -p ~/.local/share/vim/{backup,swap,undo,view} && vim +PlugUpdate +qall
=CMD lifx: sudo npm install -g lifx-client
=CMD load-fonts: for dir in $(find ~/.local/share/fonts/ -type d) ; do (cd $dir; mkfontdir ; mkfontscale) ; done ; fc-cache -f
=CMD enable-macspoof: sudo systemctl enable --now macspoof@wlan0.service
=CMD mount-data: sudo mkdir /data 2> /dev/null ; sblk -o LABEL | grep -q Data && grep -q "\s/data\s" /etc/fstab || echo "LABEL=Data		/data	auto	auto,nouser,exec,rw,async,atime	0 0" | sudo tee -a /etc/fstab
=CMD lockscreen: betterlockscreen -u $HOME/.local/share/wallpapers
=CMD kbd-backlight: echo "5m" | sudo tee /sys/class/leds/dell\:\:kbd_backlight/stop_timeout

=CMD load-env
(cd ~/.dotfiles && git submodule init && git submodule update)
(cd ~/.dotfiles/fonts/.local/share/fonts && git submodule init && git submodule update)
rm ~/.bashrc ~/.bash_profile 2>/dev/null
$HOME/.dotfiles/dot load -g -p

=CMD fan-control
grep ^dell-smm-hwmon$ /etc/modules 2> /dev/null || echo dell-smm-hwmon | sudo tee -a /etc/modules
grep "^options dell-smm-hwmon restricted=0$" /etc/modprobe.d/dell-smm-hwmon.conf 2> /dev/null || echo options dell-smm-hwmon restricted=0 | sudo tee -a /etc/modprobe.d/dell-smm-hwmon.conf
sudo modprobe -v i8k
sudo systemctl enable --now i8kmon.service
sudo systemctl enable --now dell-bios-fan-control.service

=CMD nordvpn
sudo groupadd -r nordvpn
sudo usermod -aG nordvpn $USER
sudo systemctl enable --now nordvpnd
nordvpn login
