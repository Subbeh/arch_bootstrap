#      BOOTSTRAP CONFIG FILE
#
# format:
# =<Category>
# <tag>, [name], [command-name], <description>
#
# - tag:
#       - P: package (pacman)
#       - A: AUR package (yay)
#       - C: custom command (combined with "=CMD" entry)
# - name: package name
# - command-name (optional): name of "=CMD" entry
# - description (optional): description of item
#
#               OR
#
# =CMD name: <<system command to run>
# =CMD
# <system commands to run>
# <...>
#
# Please note: =CMD sections must be added at the end, after categories

=System
P,reflector,mirrorlist,mirror-list optimizer
P,base-devel cmake binutils boost,,build tools (base-devel)
P,openssh,enable-sshd
P,net-tools dnsutils inetutils iproute2 macchanger,,network tools
P,zsh,zsh
P,virtualbox-guest-utils,enable-virtualbox
A,nordvpn-bin,nordvpn
A,i8kutils dell-bios-fan-control-git tcl acpi,fan-control,i8k fan control
P,python-pip
A,bluez bluez-utils rofi-bluetooth-git fix-bt-a2dp,enable-bluetooth,bluetooth tools
P,alsa-utils pulseaudio-alsa pulseaudio-bluetooth pavucontrol,,audio tools
P,strace,,debugging tools

=Graphical Utilities
P,xorg-server xorg-apps xorg-xinit xterm numlockx,,xorg display server
P,picom,,picom compositor
P,arandr

=Sound utilities
P,alsa-utils 
P,pulseaudio-alsa

=Desktop Environment
P,lightdm lightdm-gtk-greeter,enable-lightdm
P,bspwm sxhkd,,bspwm window manager
P,dunst libnotify notification-daemon,,notification manager
P,termite
A,polybar
P,nitrogen
P,rxvt-unicode
P,tmux
P,xdo
A,dmenu2
P,rofi
P,xclip
A,networkmanager-dmenu
A,betterlockscreen

=Utilities
P,zip unzip unrar p7zip gzip bzip2,,archiving/compression tools
P,vim,vim
P,wget
P,man-db
P,ranger
P,source-highlight
P,fzf
P,pkgfile
P,xdg-utils
P,ripgrep
P,tree
P,bat
P,ncdu

=GUI Apps
P,firefox
P,chromium
A,brave-bin
A,spotify spotifywm-git,,spotify

=Fonts
A,nerd-fonts-fira-code

=Custom
P,stow,dotfiles,dotfiles
P,nodejs npm,lifx,lifx controller

=Configuration
C,,load-fonts,load fonts
C,,enable-macspoof,spoof MAC address
C,,mount-data,mount data
C,,lockscreen,configure lockscreen

=CMD mirrorlist: reflector -c AU --sort rate --latest 5 --save /etc/pacman.d/mirrorlist
=CMD enable-sshd: sudo systemctl enable sshd
=CMD enable-lightdm: sudo systemctl enable lightdm
=CMD enable-virtualbox: sudo systemctl enable vboxservice
=CMD enable-bluetooth: sudo systemctl enable bluetooth
=CMD zsh: chsh -s $(which zsh)
=CMD vim: mkdir -p $XDG_DATA_HOME/vim/{backup,swap,undo,view} && vim +PlugUpdate +qall
=CMD lifx: sudo npm install -g lifx-client
=CMD load-fonts: for dir in $(find $XDG_DATA_HOME/fonts/ -type d) ; do (cd $dir; mkfontdir ; mkfontscale) ; done ; fc-cache -f
=CMD enable-macspoof: sudo systemctl enable macspoof@wlan0.service
=CMD mount-data: sudo mkdir /data 2> /dev/null ; sblk -o LABEL | grep -q Data && grep -q "\s/data\s" /etc/fstab || echo "LABEL=Data		/data	auto	auto,nouser,exec,rw,async,atime	0 0" | sudo tee -a /etc/fstab
=CMD lockscreen: betterlockscreen -u $HOME/.local/share/wallpapers

=CMD dotfiles
git clone git@github.com:Subbeh/dotfiles.git ~/.dotfiles
(cd ~/.dotfiles && git submodule init && git submodule update)
(cd ~/.dotfiles/fonts/.local/share/fonts && git submodule init && git submodule update)
rm ~/.bashrc ~/.bash_profile 2>/dev/null
$HOME/.dotfiles/dot load -g -p

=CMD fan-control
grep ^dell-smm-hwmon$ /etc/modules 2> /dev/null || echo dell-smm-hwmon | sudo tee -a /etc/modules
grep "^options dell-smm-hwmon restricted=0$" /etc/modprobe.d/dell-smm-hwmon.conf 2> /dev/null || echo options dell-smm-hwmon restricted=0 | sudo tee -a /etc/modprobe.d/dell-smm-hwmon.conf
sudo modprobe -v i8k
sudo systemctl enable i8kmon.service
sudo systemctl start i8kmon.service
sudo dell-bios-fan-control on

=CMD nordvpn
sudo groupadd -r nordvpn
sudo usermod -aG nordvpn $USER
sudo systemctl enable nordvpnd
sudo systemctl start nordvpn
nordvpn login
